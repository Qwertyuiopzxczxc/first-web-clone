// === –ü–ï–†–ï–ú–ï–ù–ù–´–ï ===
// –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
const buttonTheme = document.getElementById('themeToggle');
const taskInput = document.getElementById('taskInput');
const addTaskBtn = document.getElementById('addTaskBtn');
const taskList = document.getElementById('taskList');
const totalTasksSpan = document.getElementById('totalTasks');
const completedTasksSpan = document.getElementById('completedTasks');

// –ú–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (–∑–∞–¥–∞—á)
let tasks = [];

function toggletheme(){
    // body - –Ω–∞—à —Ç—ç–≥ –∏–∑ html —Ñ–∞–π–ª–∞
    // classList - –ø–æ–ª—É—á–∞–µ—Ç –≤–µ—Å—å —Å–ø–∏—Å–æ–∫ –∫–ª–∞—Å—Å–æ–≤ —É —ç–ª–µ–º–µ–Ω—Ç–∞ 
    // toggle - –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –∫–ª–∞—Å—Å (–µ—Å–ª–∏ –∫–ª–∞—Å—Å–∞ –Ω–µ—Ç - –¥–æ–±–∞–≤–ª—è–µ—Ç –µ–≥–æ, –∏ —É–¥–∞–ª—è–µ—Ç –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å)
    document.body.classList.toggle('dark-theme');

    // contains() - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ —É —ç–ª–µ–º–µ–Ω—Ç–∞
    if(document.body.classList.contains('dark-theme')){
        // –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ –∫–æ—Ç–æ—Ä–æ–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–Ω–æ–ø–∫–∞
        // button - —ç—Ç–æ –Ω–∞—à–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è, –≤ –∫–æ—Ç–æ—Ä–æ–π —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–Ω–æ–ø–∫–∞
        // textContent - —ç—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∏–º–æ–µ —Ç–µ–∫—Å—Ç–∞ —Ç—ç–≥–∞
        button.textContent = '‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞';
        // –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–µ–º—ã (—á—Ç–æ–±—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–º—É –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏)
        localStorage.setItem('darkTheme', 'enabled');
    }else{
        button.textContent = 'üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞';
localStorage.setItem('darkTheme', 'disabled');
    }
}

// === –§–£–ù–ö–¶–ò–ò –î–õ–Ø –†–ê–ë–û–¢–´ –° –ó–ê–î–ê–ß–ê–ú–ò ===

// –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏
function addTask(){
    // trim - —É–±–∏—Ä–∞–µ—Ç –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã –≤ –∑–Ω–∞—á–µ–Ω–∏–∏
    const taskText = taskInput.ariaValueMax.trim();

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–µ –ø–æ–ª–µ –≤–≤–æ–¥–∞
    if (taskText == '') {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞ –≤–≤–µ–¥–∏—Ç–µ –∑–∞–¥–∞—á—É!');
        return; // –í—ã—Ö–æ–¥ –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –∑–∞–¥–∞—á–∏
    // –û–±—ä–µ–∫—Ç—ã - —ç—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–æ—Ç–æ—Ä–∞—è —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ –≤–∏–¥–µ –ø–∞—Ä - –∫–ª—é—á, –∑–Ω–∞—á–µ–Ω–∏–µ
    const newTask = {
        id: Date.now(),
        text: taskText,
        completed: false
    }

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—à–µ–π –∑–∞–¥–∞—á–∏ –≤ —Å–ø–∏—Å–æ–∫ (–º–∞—Å—Å–∏–≤) –∑–∞–¥–∞—á
    // push() - –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –∫–æ–Ω–µ—Ü —Å–ø–∏—Å–∫–∞ (append –≤ python)
    tasks.push(newTask);

    // –û—á–∏—â–∞–µ–º –ø–æ–ª—è –≤–≤–æ–¥–∞ –ø–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
    taskInput.value = '';
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á (–æ—Ç–æ–±—Ä–∞–∂–µ–∏–µ —Å–ø–∏—Å–∫–∞)
    renderTasks();

    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –∑–∞–¥–∞—á
    updateCounters();    
}
// –§—É–Ω–∫—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è) –≤—Å–µ–≥–æ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á
function renderTasks(){
    // –û—á–∏—â–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
    taskList.innerHTML = '';

    // –ü–µ—Ä–µ–±–∏—Ä–∞–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ –º–∞—Å—Å–∏–≤–µ
    // forEach() - –º–µ—Ç–æ–¥ –ø–µ—Ä–µ–±–æ—Ä–∞ –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –º–∞—Å—Å–∏–≤–∞
    tasks.forEach(task => {
        // –°–æ–∑–¥–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ —Å–ø–∏—Å–∫–∞
        // CreateElement() - –º–µ—Ç–æ–¥ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ HTML-—ç–ª–µ–º–µ–Ω—Ç–∞
        const taskItem = document.createElement("li");
        taskItem.className = "task-item";

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ 
        if(task.completed){
            taskItem.classList.add("completed");
        }
        
        // –°–æ–∑–¥–∞–Ω–∏–µ HTML —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏
        taskItem.innerHTML = `
            <span class="task-text">${task.text}</span>
        `;

        // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–∞—á—É –≤ —Å–ø–∏—Å–æ–∫ HTML
        // appendChild() - –º–µ—Ç–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –∫–æ–Ω–µ—Ü –¥—Ä—É–≥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
        taskList.appendChild(taskItem);
    });
}


// === –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô ===
buttonTheme.addEventListener('click', toggletheme);
addTaskBtn.addEventListener('click', addTask);

// === –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–π —Ç–µ–º—ã
if(localStorage.getItem('darkTheme') === 'enabled'){
    document.body.classList.add('dark-theme');
    buttonTheme.textContent = '‚òÄÔ∏è –°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞';
}